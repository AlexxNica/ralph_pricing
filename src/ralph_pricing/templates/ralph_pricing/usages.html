{% extends "ralph_pricing/base.html" %}
{% load url from future %}
{% load icons %}
{% load formats %}
{% load bob %}

{% block content %}
{% if formset %}
<form method="POST">
{% csrf_token %}
{{ formset.management_form }}
<table class="table table-striped table-bordered details-dns table-condensed">
    <thead>
        <tr>
            <th width="16"></th>
            {% if by_warehouse %}
            <th width="20">Warehouse</th>
            {% endif %}
            {% if not by_cost %}
            <th width="*">Forecast price</th>
            <th width="*">Price</th>
            {% else %}
            <th width="*">Forecast cost</th>
            <th width="*">Cost</th>
            {% endif %}
            <th width="*">Start</th>
            <th width="*">End</th>
            <th width="20">Del</th>
        </tr>
    </thead>
    <tbody>
        {% for form in formset %}
        <tr>
            <td style="vertical-align:middle">
                {% icon 'fugue-money-coin' %}
                {% for f in form.hidden_fields %}{{ f }}{% endfor %}
            </td>
            {% for f in form.visible_fields %}
            {% if by_cost and f.name == 'price' %}
            <td style="display:none"> {{ f }} </td>
            {% elif by_cost and f.name == 'forecast_price' %}
            <td style="display:none"> {{ f }} </td>
            {% elif not by_cost and f.name == 'cost' %}
            <td style="display:none"> {{ f }} </td>
            {% elif not by_cost and f.name == 'forecast_cost' %}
            <td style="display:none"> {{ f }} </td>
            {% elif not by_cost and f.name == 'warehouse' %}
            {% else %}
            <td class="control-group {{ f.css_classes }} {% if f.errors %}error{% endif %}" style="vertical-align:middle;text-align:center">
                {{ f }}
                {% for e in f.errors %}
                    <div class="help-block">{{ e }}</div>
                {% endfor %}
            </td>
            {% endif %}
            {% endfor %}
        </tr>
        {% endfor %}
    </tbody>
</table>
<div class="buttons pull-right">
    {% spaceless %}
    <button type="submit" value="Save" class="btn btn-primary"
    >{% icon 'fugue-tick' %}&nbsp;Save</button>
    {% endspaceless %}
</div>
</form>
{% endif %}
{% endblock content %}
